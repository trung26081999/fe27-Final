{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { notification } from 'antd';\nimport { toast } from 'react-toastify';\nimport { PRODUCT_LIMIT } from './product.slice';\nconst USER_INFO_KEY = 'USER_INFO';\nconst userInfoFromStorage = localStorage.getItem(USER_INFO_KEY) ? JSON.parse(localStorage.getItem(USER_INFO_KEY)) : null;\nconst initialState = {\n  userInfoState: {\n    token: userInfoFromStorage,\n    data: null,\n    loading: false,\n    error: null,\n    pagination: {\n      // Trang hiện tại\n      page: 1,\n      // Số record trả về trong 1 trang\n      limit: PRODUCT_LIMIT,\n      // Tổng số record từ server\n      total: null,\n      // Tổng số trang\n      totalPage: null\n    }\n  }\n};\nconst userSlice = createSlice({\n  name: 'users',\n  initialState,\n  reducers: {\n    loginAction(state, action) {\n      localStorage.removeItem(USER_INFO_KEY);\n      state.userInfoState = { ...state.userInfoState,\n        loading: true\n      };\n    },\n\n    loginActionSuccess(state, action) {\n      const {\n        token,\n        user\n      } = action.payload; // console.log(\"userInfo\",user);\n\n      localStorage.setItem(USER_INFO_KEY, JSON.stringify(token));\n      state.userInfoState = { ...state.userInfoState,\n        loading: false,\n        token: token,\n        data: user\n      };\n    },\n\n    loginActionFailed(state, action) {\n      localStorage.removeItem(USER_INFO_KEY);\n      state.userInfoState = { ...state.userInfoState,\n        loading: false,\n        error: toast.error(action.payload)\n      };\n    },\n\n    registerAction(state, action) {\n      localStorage.removeItem(USER_INFO_KEY);\n      state.userInfoState = { ...state.userInfoState,\n        loading: true\n      };\n    },\n\n    registerActionSuccess(state, action) {\n      const userInfoResponse = { ...action.payload\n      }; // localStorage.setItem(USER_INFO_KEY, JSON.stringify(userInfoResponse))\n\n      state.userInfoState = { ...state.userInfoState,\n        loading: false,\n        data: userInfoResponse\n      };\n    },\n\n    registerActionFailed(state, action) {\n      // localStorage.removeItem(USER_INFO_KEY)\n      state.userInfoState = { ...state.userInfoState,\n        loading: false,\n        error: toast.error(action.payload)\n      };\n    },\n\n    fetchUserRegisterAction: (state, action) => {\n      const page = action.payload;\n      state.userInfoState = { ...state.userInfoState,\n        loading: true,\n        pagination: { ...state.userInfoState.pagination,\n          page\n        }\n      };\n    },\n    fetchUserRegisterActionSuccess: (state, action) => {\n      const {\n        data,\n        totalProduct\n      } = action.payload;\n      state.userInfoState = { ...state.userInfoState,\n        data,\n        loading: false,\n        pagination: { ...state.userInfoState.pagination,\n          total: +totalProduct,\n          totalPage: totalProduct / PRODUCT_LIMIT\n        }\n      };\n    },\n    fetchUserRegisterActionFailed: (state, action) => {\n      notification.error(action.payload);\n    },\n\n    logoutAction(state, action) {\n      console.log('logout');\n      localStorage.removeItem(USER_INFO_KEY);\n      state.userInfoState = { ...state.userInfoState,\n        loading: false,\n        data: null,\n        token: null\n      };\n    } // logoutActionSuccess(state, action) {\n    // },\n    // logoutActionFailed(state, action) {\n    // },\n\n\n  }\n});\nexport const {\n  loginAction,\n  loginActionSuccess,\n  loginActionFailed,\n  registerAction,\n  registerActionSuccess,\n  registerActionFailed,\n  logoutAction,\n  fetchUserRegisterAction,\n  fetchUserRegisterActionSuccess,\n  fetchUserRegisterActionFailed\n} = userSlice.actions;\nexport const userReducer = userSlice.reducer;","map":{"version":3,"names":["createSlice","notification","toast","PRODUCT_LIMIT","USER_INFO_KEY","userInfoFromStorage","localStorage","getItem","JSON","parse","initialState","userInfoState","token","data","loading","error","pagination","page","limit","total","totalPage","userSlice","name","reducers","loginAction","state","action","removeItem","loginActionSuccess","user","payload","setItem","stringify","loginActionFailed","registerAction","registerActionSuccess","userInfoResponse","registerActionFailed","fetchUserRegisterAction","fetchUserRegisterActionSuccess","totalProduct","fetchUserRegisterActionFailed","logoutAction","console","log","actions","userReducer","reducer"],"sources":["/Users/luongvantrung/Dropbox/Dropbox/Mac/Desktop/Final-project-fe27/src/stores/slices/user.slice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport { notification } from 'antd';\nimport { toast } from 'react-toastify';\nimport { PRODUCT_LIMIT } from './product.slice';\n\nconst USER_INFO_KEY = 'USER_INFO';\n\nconst userInfoFromStorage = localStorage.getItem(USER_INFO_KEY) ? JSON.parse(localStorage.getItem(USER_INFO_KEY)) : null;\n\nconst initialState = {\n    userInfoState: {\n        token: userInfoFromStorage,\n        data: null,\n        loading: false,\n        error: null,\n        pagination: {\n            // Trang hiện tại\n            page: 1,\n            // Số record trả về trong 1 trang\n            limit: PRODUCT_LIMIT,\n            // Tổng số record từ server\n            total: null,\n            // Tổng số trang\n            totalPage: null,\n        },\n    },\n}\n\nconst userSlice = createSlice({\n    name: 'users',\n    initialState,\n    reducers: {\n        loginAction(state, action) {\n            localStorage.removeItem(USER_INFO_KEY)\n            state.userInfoState = {\n                ...state.userInfoState,\n                loading: true,\n            }\n        },\n        loginActionSuccess(state, action) {\n            const {token, user} = action.payload;\n            // console.log(\"userInfo\",user);\n            localStorage.setItem(USER_INFO_KEY, JSON.stringify(token));\n            state.userInfoState = {\n                ...state.userInfoState,\n                loading: false,\n                token: token,\n                data: user,\n            }\n        },\n        loginActionFailed(state, action) {\n            localStorage.removeItem(USER_INFO_KEY)\n            state.userInfoState = {\n                ...state.userInfoState,\n                loading: false,\n                error: toast.error(action.payload),\n            }\n        },\n        registerAction(state, action) {\n            localStorage.removeItem(USER_INFO_KEY)\n            state.userInfoState = {\n                ...state.userInfoState,\n                loading: true,\n            }\n        },\n        registerActionSuccess(state, action) {\n            const userInfoResponse = { ...action.payload };\n            // localStorage.setItem(USER_INFO_KEY, JSON.stringify(userInfoResponse))\n            state.userInfoState = {\n                ...state.userInfoState,\n                loading: false,\n                data: userInfoResponse,\n            }\n        },\n        registerActionFailed(state, action) {\n            // localStorage.removeItem(USER_INFO_KEY)\n            state.userInfoState = {\n                ...state.userInfoState,\n                loading: false,\n                error: toast.error(action.payload),\n            }\n        },\n\n        fetchUserRegisterAction: (state, action) => {\n            const page = action.payload;\n\n            state.userInfoState = {\n                ...state.userInfoState,\n                loading: true,\n                pagination: {\n                    ...state.userInfoState.pagination,\n                    page,\n                },\n            };\n        },\n        fetchUserRegisterActionSuccess: (state, action) => {\n            const { data, totalProduct } = action.payload;\n\n            state.userInfoState = {\n                ...state.userInfoState,\n                data,\n                loading: false,\n                pagination: {\n                    ...state.userInfoState.pagination,\n                    total: +totalProduct,\n                    totalPage: totalProduct / PRODUCT_LIMIT,\n                },\n            };\n        },\n        fetchUserRegisterActionFailed: (state, action) => {\n            notification.error(action.payload);\n        },\n\n        logoutAction(state, action) {\n            console.log('logout');\n            localStorage.removeItem(USER_INFO_KEY);\n            state.userInfoState = {\n                ...state.userInfoState,\n                loading: false,\n                data: null,\n                token: null,\n            }\n        },\n        // logoutActionSuccess(state, action) {\n        // },\n        // logoutActionFailed(state, action) {\n        // },\n    },\n})\n\nexport const {\n    loginAction, loginActionSuccess, loginActionFailed,\n    registerAction, registerActionSuccess, registerActionFailed,\n    logoutAction,\n    fetchUserRegisterAction,\n    fetchUserRegisterActionSuccess,\n    fetchUserRegisterActionFailed,\n} = userSlice.actions\nexport const userReducer = userSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module"}